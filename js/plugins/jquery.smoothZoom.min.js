!function($,t,o){function e(t,o){var e=this,a=$.extend({},s,o);if(this.$elem=t,this.hasTouch=this.checkTouchSupport(),this.sW=a.width,this.sH=a.height,this.init_zoom=a.initial_ZOOM/100,this.init_pos=a.initial_POSITION.replace(/,/g," ").replace(/\s{2,}/g," ").split(" "),this.zoom_max=a.zoom_MAX/100,this.zoom_min=a.zoom_MIN/100,this.zoom_single=i(a.zoom_SINGLE_STEP),this.zoom_fit=i(a.zoom_OUT_TO_FIT),this.zoom_speed=1+((0===a.animation_SPEED||a.animation_SPEED?a.animation_SPEED:a.animation_SPEED_ZOOM)+1)/20,this.zoom_show=i(a.zoom_BUTTONS_SHOW),this.pan_speed_o=0===a.animation_SPEED||a.animation_SPEED?a.animation_SPEED:a.animation_SPEED_PAN,this.pan_show=i(a.pan_BUTTONS_SHOW),this.pan_limit=i(a.pan_LIMIT_BOUNDARY),this.pan_rev=i(a.pan_REVERSE),this.reset_align=a.reset_ALIGN_TO.toLowerCase().split(" "),this.reset_to_zmin=i(a.reset_TO_ZOOM_MIN),this.bu_size=2*parseInt((this.hasTouch?a.button_SIZE_TOUCH_DEVICE:a.button_SIZE)/2),this.bu_color=a.button_COLOR,this.bu_bg=a.button_BG_COLOR,this.bu_bg_alpha=a.button_BG_TRANSPARENCY/100,this.bu_icon=a.button_ICON_IMAGE,this.bu_auto=i(a.button_AUTO_HIDE),this.bu_delay=1e3*a.button_AUTO_HIDE_DELAY,this.bu_align=a.button_ALIGN.toLowerCase().split(" "),this.bu_margin=a.button_MARGIN,this.bu_round=i(a.button_ROUND_CORNERS),this.touch_drag=i(a.touch_DRAG),this.mouse_drag=i(a.mouse_DRAG),this.mouse_wheel=i(a.mouse_WHEEL),this.mouse_wheel_cur=i(a.mouse_WHEEL_CURSOR_POS),this.mouse_dbl_click=i(a.mouse_DOUBLE_CLICK),this.ani_smooth=Math.max(1,(a.animation_SMOOTHNESS+1)/1.45),this.bg_color=a.background_COLOR,this.bord_size=a.border_SIZE,this.bord_color=a.border_COLOR,this.bord_alpha=a.border_TRANSPARENCY/100,this.container=a.container,this.image_url=a.image_url,this.image_width=a.image_original_width,this.image_height=a.image_original_height,this.responsive=i(a.responsive),this.maintain_ratio=i(a.responsive_maintain_ratio),this.w_max=a.max_WIDTH,this.h_max=a.max_HEIGHT,this.onLOAD=a.on_IMAGE_LOAD,this.onUPDATE=a.on_ZOOM_PAN_UPDATE,this.onZOOM_PAN=a.on_ZOOM_PAN_COMPLETE,this.onLANDMARK=a.on_LANDMARK_STATE_CHANGE,this._x,this._y,this._w,this._h,this._sc=0,this.rA=1,this.rF=1,this.rR=1,this.iW=0,this.iH=0,this.tX=0,this.tY=0,this.oX=0,this.oY=0,this.fX=0,this.fY=0,this.dX=0,this.dY=0,this.cX=0,this.cY=0,this.transOffX=0,this.transOffY=0,this.focusOffX=0,this.focusOffY=0,this.offX=0,this.offY=0,this._playing=!1,this._dragging=!1,this._onfocus=!1,this._moveCursor=!1,this._wheel=!1,this._recent="zoomOut",this._pinching=!1,this._landmark=!1,this._rA,this._centx,this._centy,this._onButton=!1,this._onHitArea=!1,this.cFlag={_zi:!1,_zo:!1,_ml:!1,_mr:!1,_mu:!1,_md:!1,_rs:!1,_nd:!1},this.$holder,this.$hitArea,this.$controls,this.$loc_cont,this.map_coordinates=[],this.locations=[],this.buttons=[],this.border=[],this.buttons_total=7,this.cButtId=0,this.pan_speed,this.auto_timer,this.ani_timer,this.ani_end,this.focusSpeed=this.reduction=.5,this.orig_style,this.mapAreas,this.icons,this.show_at_zoom,this.assetsLoaded=!1,this.zStep=0,this.sRed=300,this.use3D=a.use_3D_Transform&&_,navigator.pointerEnabled||navigator.msPointerEnabled?(navigator.pointerEnabled?(this.pointerDown="pointerdown",this.pointerUp="pointerup",this.pointerMove="pointermove"):navigator.msPointerEnabled&&(this.pointerDown="MSPointerDown",this.pointerUp="MSPointerUp",this.pointerMove="MSPointerMove"),this.event_down=this.pointerDown+".sz",this.event_up=this.pointerUp+".sz",this.event_move=this.pointerMove+".sz",this.supportsPointer=!0,this.pointers=[]):this.hasTouch?(this.event_down="touchstart.sz",this.event_up="touchend.sz",this.event_move="touchmove.sz"):(this.event_down="mousedown.sz",this.event_up="mouseup.sz",this.event_move="mousemove.sz"),""==this.image_url)this.$image=t,this.id=this.$image.attr("id");else{var r=new Image;this.image_width&&(r.width=this.image_width),this.image_height&&(r.height=this.image_height),r.src=this.image_url,this.$image=$(r).appendTo(t)}this.setContainer();var h;if(!this.bu_icon){var c=/url\(["']?([^'")]+)['"]?\)/;h=$('<div class="smooth_zoom_icons"></div>'),this.$holder.append(h),this.bu_icon=h.css("background-image").replace(c,"$1"),"none"==this.bu_icon&&(this.bu_icon="zoom_assets/icons.png"),h.remove()}this.$image.css("-moz-transform")&&n?(h=$('<div style="-moz-transform: translate(1px, 1px)"></div>'),this.$holder.append(h),this.fixMoz=1===h.position().left?!1:!0,h.remove()):this.fixMoz=!1,this.$image.hide(),this.imgList=[{loaded:!1,src:this.bu_icon||"zoom_assets/icons.png"},{loaded:!1,src:""==this.image_url?this.$image.attr("src"):this.image_url}],$.each(this.imgList,function(t){var o=new Image;$(o).bind("load",{id:t,self:e},e.loadComplete).bind("error",{id:t,self:e},e.loadComplete),o.src=e.imgList[t].src})}function i(t){return t===!0?!0:t&&(t=t.toLowerCase(),"yes"==t||"true"==t)?!0:!1}var s={width:"",height:"",initial_ZOOM:"",initial_POSITION:"",animation_SMOOTHNESS:5.5,animation_SPEED_ZOOM:5.5,animation_SPEED_PAN:5.5,zoom_MAX:800,zoom_MIN:"",zoom_SINGLE_STEP:!1,zoom_OUT_TO_FIT:!0,zoom_BUTTONS_SHOW:!0,pan_BUTTONS_SHOW:!0,pan_LIMIT_BOUNDARY:!0,pan_REVERSE:!1,reset_ALIGN_TO:"center center",reset_TO_ZOOM_MIN:!0,button_SIZE:18,button_SIZE_TOUCH_DEVICE:30,button_COLOR:"#FFFFFF",button_BG_COLOR:"#000000",button_BG_TRANSPARENCY:55,button_AUTO_HIDE:!1,button_AUTO_HIDE_DELAY:1,button_ALIGN:"bottom right",button_MARGIN:10,button_ROUND_CORNERS:!0,touch_DRAG:!0,mouse_DRAG:!0,mouse_WHEEL:!0,mouse_WHEEL_CURSOR_POS:!0,mouse_DOUBLE_CLICK:!0,background_COLOR:"#FFFFFF",border_SIZE:1,border_COLOR:"#000000",border_TRANSPARENCY:10,image_url:"",image_original_width:"",image_original_height:"",container:"",on_IMAGE_LOAD:"",on_ZOOM_PAN_UPDATE:"",on_ZOOM_PAN_COMPLETE:"",on_LANDMARK_STATE_CHANGE:"",use_3D_Transform:!0,responsive:!1,responsive_maintain_ratio:!0,max_WIDTH:"",max_HEIGHT:""};e.prototype={loadComplete:function(t){var o=t.data.self,e=!0;o.imgList[t.data.id].loaded=!0;for(var i=0;i<o.imgList.length;i++)o.imgList[i].loaded||(e=!1);e&&(o.assetsLoaded=!0,""!==o.onLOAD&&o.onLOAD(),o.init())},checkTouchSupport:function(){var e="ontouchstart"in t||"createTouch"in o;return navigator.pointerEnabled?e=Boolean(e||navigator.maxTouchPoints):navigator.msPointerEnabled&&(e=Boolean(e||navigator.msMaxTouchPoints)),e},init:function(){var t=this,e=t.$image,i=t.sW,s=t.sH,_=t.container,h,c,l=t.pan_show,d=t.zoom_show,p=t.$controls,m=t.buttons,u=t.cFlag,g=t.bu_align,f=t.bu_margin,b=t.$holder;t.orig_style=t.getStyle(),e.attr("galleryimg","no"),navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)||(e.removeAttr("width"),e.removeAttr("height"));for(var v=e,w=[],x=0;5>x&&(v&&"BODY"!==v[0].tagName&&"HTML"!==v[0].tagName);x++)"none"==v.css("display")&&(v.css("display","block"),w.push(v)),v=v.parent();t.iW=e.width(),t.iH=e.height();for(var x=0;x<w.length;x++)w[x].css("display","none");t.rF=t.rR=t.checkRatio(i,s,t.iW,t.iH,t.zoom_fit),0==t.zoom_min||0!=t.init_zoom?(t.rA=t._sc=""!=t.init_zoom?t.init_zoom:t.rF,0!=t.zoom_min&&(t.rF=t.zoom_min,t.reset_to_zmin&&(t.rR=t.zoom_min))):t.rF<t.zoom_min?(t.rF=t.zoom_min,t.reset_to_zmin&&(t.rR=t.zoom_min),t.rA=t._sc=t.zoom_min):t.rA=t._sc=t.rR,t._w=t._sc*t.iW,t._h=t._sc*t.iH,""==t.init_pos?(t._x=t.tX=(i-t._w)/2,t._y=t.tY=(s-t._h)/2):(t._x=t.tX=i/2-parseInt(t.init_pos[0])*t._sc,t._y=t.tY=s/2-parseInt(t.init_pos[1])*t._sc,t.oX=(t.tX-(i-t._w)/2)/(t._w/i),t.oY=(t.tY-(s-t._h)/2)/(t._h/s)),t.pan_limit&&!t._moveCursor&&t.init_zoom==t.rF||!t.mouse_drag||(e.css("cursor","move"),t.$hitArea.css("cursor","move")),n&&t.$image.css(a,"0 0"),t.use3D&&e.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1e3}),e.css({position:"absolute","z-index":2,left:"0px",top:"0px","-webkit-box-shadow":"1px 1px rgba(0,0,0,0)"}).hide().fadeIn(500,function(){b.css("background-image","none")});var t=t,A=t.bu_size,z=50,y=2,O=3,Y=Math.ceil(t.bu_size/4),X=16>A?50:0,H=A-y;l?(h=parseInt(d?A+.85*A+3*H+2*O+2*Y:3*H+2*O+2*Y),c=parseInt(3*H+2*O+2*Y)):d?(h=parseInt(A+2*Y),c=parseInt(2*A+3*Y),h=2*parseInt(h/2),c=2*parseInt(c/2)):(h=0,c=0);var F=(z-A)/2,I=h-2*(A-(l?y:0))-Y-O,D=c/2-(A-(l?y:0))/2,W,E,T,M;"top"==g[0]?(E="top",M=f):"center"==g[0]?(E="top",M=parseInt((s-c)/2)):(E="bottom",M=f),"right"==g[1]?(W="right",T=f):"center"==g[1]?(W="right",T=parseInt((i-h)/2)):(W="left",T=f),p=$('<div style="position: absolute; '+W+":"+T+"px; "+E+": "+M+"px; width: "+h+"px; height: "+c+'px; z-index: 20;" class="noSel">					<div class="noSel controlsBg" style="position: relative; width: 100%; height: 100%; z-index: 1;">					</div>				</div>'),b.append(p);var S=p.find(".controlsBg");t.bu_round?r?S.css(r,(X>0?4:5)+"px").css("background-color",t.bu_bg):t.roundBG(S,"cBg",h,c,X>0?4:5,375,t.bu_bg,t.bu_icon,1,X?50:0):S.css("background-color",t.bu_bg),S.css("opacity",t.bu_bg_alpha),m[0]={_var:"_zi",l:Y,t:l?(c-2*A-2*O+2)/2:Y,w:A,h:A,bx:-F,by:-F-X},m[1]={_var:"_zo",l:Y,t:l?(c-2*A-2*O+2)/2+A+2*O-2:c-A-Y,w:A,h:A,bx:-z-F,by:-F-X},m[2]={_var:t.pan_rev?"_ml":"_mr",l:I-H-O,t:D,w:H,h:H,bx:-(y/2)-2*z-F,by:-(y/2)-F-X},m[3]={_var:t.pan_rev?"_mr":"_ml",l:I+H+O,t:D,w:H,h:H,bx:-(y/2)-3*z-F,by:-(y/2)-F-X},m[4]={_var:t.pan_rev?"_md":"_mu",l:I,t:D+H+O,w:H,h:H,bx:-(y/2)-4*z-F,by:-(y/2)-F-X},m[5]={_var:t.pan_rev?"_mu":"_md",l:I,t:D-H-O,w:H,h:H,bx:-(y/2)-5*z-F,by:-(y/2)-F-X},m[6]={_var:"_rs",l:I,t:D,w:H,h:H,bx:-(y/2)-6*z-F,by:-(y/2)-F-X};for(var x=0;7>x;x++){m[x].$ob=$('<div style="position: absolute; display: '+(2>x?d?"block":"none":l?"block":"none")+"; left: "+(m[x].l-1)+"px; top: "+(m[x].t-1)+"px; width: "+(m[x].w+2)+"px; height: "+(m[x].h+2)+"px; z-index:"+(x+1)+';" class="noSel">						</div>').css("opacity",.7).bind("mouseover.sz mouseout.sz "+t.event_down,{id:x},function(o){t._onfocus=!1;var e=$(this);"mouseover"==o.type?e.css("opacity")>.5&&e.css("opacity",1):"mouseout"==o.type?e.css("opacity")>.5&&e.css("opacity",.7):("mousedown"==o.type||"touchstart"==o.type||o.type==t.pointerDown)&&(t.cButtId=o.data.id,t._onButton=!0,t._wheel=!1,e.css("opacity")>.5&&(e.css("opacity",1),b.find("#"+m[t.cButtId]._var+"norm").hide(),b.find("#"+m[t.cButtId]._var+"over").show(),t.cButtId<=1&&t.zoom_single?u[m[t.cButtId]._var]||(t.sRed=300,u[m[t.cButtId]._var]=!0):t.cButtId<6?u[m[t.cButtId]._var]=!0:(u._rs=!0,t.rA=t.rR,t.fY="top"==t.reset_align[0]?t.sH/2*(t.rA/2):"bottom"==t.reset_align[0]?-(t.sH/2)*(t.rA/2):0,t.fX="left"==t.reset_align[1]?t.sW/2*(t.rA/2):"right"==t.reset_align[1]?-(t.sW/2)*(t.rA/2):0),t.focusOffX=t.focusOffY=0,t.changeOffset(!0,!0),t._playing||t.Animate()),o.preventDefault(),o.stopPropagation())});var L=$('<div id="'+m[x]._var+'norm" style="position: absolute; left: 1px; top: 1px; width: '+m[x].w+"px; height: "+m[x].h+"px; "+(r||!t.bu_round?"background:"+t.bu_color:"")+'">					</div>'),R=$('<div id="'+m[x]._var+'over" style="position: absolute; left: 0px; top: 0px; width: '+(m[x].w+2)+"px; height: "+(m[x].h+2)+"px; display: none; "+(r||!t.bu_round?"background:"+t.bu_color:"")+'">					</div>'),P=$('<div id="'+m[x]._var+'_icon" style="position: absolute; left: 1px; top: 1px; width: '+m[x].w+"px; height: "+m[x].h+"px; background: transparent url("+t.bu_icon+") "+m[x].bx+"px "+m[x].by+'px no-repeat;" >					</div>');m[x].$ob.append(L,R,P),p.append(m[x].$ob),t.bu_round&&(r?(L.css(r,"2px"),R.css(r,"2px")):(t.roundBG(L,m[x]._var+"norm",m[x].w,m[x].h,2,425,t.bu_color,t.bu_icon,x+1,X?50:0),t.roundBG(R,m[x]._var+"over",m[x].w+2,m[x].h+2,2,425,t.bu_color,t.bu_icon,x+1,X?50:0)))}if($(o).bind(t.event_up+t.id,{self:t},t.mouseUp),(t.mouse_drag&&!t.hasTouch||t.touch_drag&&t.hasTouch)&&(t.$holder.bind(t.event_down,{self:t},t.mouseDown),t.hasTouch&&$(o).bind(t.event_move+t.id,{self:t},t.mouseDrag)),t.mouse_dbl_click){var k,N,C=1;t.$holder.bind("dblclick.sz",function(o){t.focusOffX=o.pageX-b.offset().left-t.sW/2,t.focusOffY=o.pageY-b.offset().top-t.sH/2,t.changeOffset(!0,!0),t._wheel=!1,t.rA<t.zoom_max&&-1==C&&k!=t.focusOffX&&N!=t.focusOffY&&(C=1),k=t.focusOffX,N=t.focusOffY,t.rA>=t.zoom_max&&1==C&&(C=-1),t.rA<=t.rF&&-1==C&&(C=1),C>0?(t.rA*=2,t.rA=t.rA>t.zoom_max?t.zoom_max:t.rA,u._zi=!0,clearTimeout(t.ani_timer),t._playing=!0,t.Animate(),u._zi=!1):(t.rA/=2,t.rA=t.rA<t.rF?t.rF:t.rA,u._zo=!0,clearTimeout(t.ani_timer),t._playing=!0,t.Animate(),u._zo=!1),o.preventDefault(),o.stopPropagation()})}t.mouse_wheel&&b.bind("mousewheel.sz",{self:this},t.mouseWheel),t.bu_auto&&b.bind("mouseleave.sz",{self:this},t.autoHide),p.bind(t.event_down,function(t){t.preventDefault(),t.stopPropagation()}),t.mouse_dbl_click&&p.bind("dblclick.sz",function(t){t.preventDefault(),t.stopPropagation()}),$(".noSel").each(function(){this.onselectstart=function(){return!1}}),t.$holder=b,t.$controls=p,t.sW=i,t.sH=s,t.cBW=h,t.cBH=c,t.Animate()},setContainer:function(){var o=this,e=o.$image,s=o.bord_size,n=o.border,a=o.$holder;if(""==o.container&&""==o.image_url)a=o.$image.wrap('<div class="noSel smooth_zoom_preloader">					</div>').parent();else if(a=""==o.image_url?$("#"+o.container):o.$elem,a.addClass("noSel smooth_zoom_preloader"),o.locations=[],o.$loc_cont=a.find(".landmarks"),o.$loc_cont[0]){var r=o.$loc_cont.children(".item");o.loc_clone=o.$loc_cont.clone(),o.show_at_zoom=parseInt(o.$loc_cont.data("show-at-zoom"),10)/100,o.allow_scale=i(o.$loc_cont.data("allow-scale")),o.allow_drag=i(o.$loc_cont.data("allow-drag")),r.each(function(){o.setLocation($(this))})}a.css({position:"relative",overflow:"hidden","text-align":"left","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none","-webkit-touch-callout":"none","-ms-touch-action":"none","-webkit-tap-highlight-color":"rgba(255, 255, 255, 0)","background-color":o.bg_color,"background-position":"center center","background-repeat":"no-repeat"}),o.$hitArea=$('<div style="position: absolute; z-index: 1; top: 0px; left: 0px; width: 100%; height: 100%;" ></div>').appendTo(a),o.getContainerSize(o.sW,o.sH,a,o.w_max,o.h_max),o.responsive&&$(t).bind("orientationchange.sz"+o.id+" resize.sz"+o.id,{self:o},o.resize);var _=o.sW,h=o.sH;a.css({width:_,height:h}),s>0&&(n[0]=$('<div style="position: absolute;	width: '+s+"px; height: "+h+"px;	top: 0px; left: 0px; z-index: 3; background-color: "+o.bord_color+';"></div>').css("opacity",o.bord_alpha),n[1]=$('<div style="position: absolute;	width: '+s+"px; height: "+h+"px;	top: 0px; left: "+(_-s)+"px; z-index: 4; background-color: "+o.bord_color+';"></div>').css("opacity",o.bord_alpha),n[2]=$('<div style="position: absolute;	width: '+(_-2*s)+"px; height: "+s+"px; top: 0px; left: "+s+"px; z-index: 5; background-color: "+o.bord_color+'; line-height: 1px;"></div>').css("opacity",o.bord_alpha),n[3]=$('<div style="position: absolute;	width: '+(_-2*s)+"px; height: "+s+"px; top: "+(h-s)+"px; left: "+s+"px; z-index: 6; background-color: "+o.bord_color+'; line-height: 1px;"></div>').css("opacity",o.bord_alpha),a.append(n[0],n[1],n[2],n[3])),void 0!=e.attr("usemap")&&(o.mapAreas=$("map[name='"+e.attr("usemap").split("#").join("")+"']").children("area"),o.mapAreas.each(function(t){var e=$(this);e.css("cursor","pointer"),o.mouse_drag&&e.bind(o.event_down,{self:o},o.mouseDown),o.mouse_wheel&&e.bind("mousewheel.sz",{self:o},o.mouseWheel),o.map_coordinates.push(e.attr("coords").split(","))})),o.$holder=a,o.sW=_,o.sH=h},getContainerSize:function(t,o,e,i,s){""===t||0===t?t=""==this.image_url?Math.max(e.parent().width(),100):Math.max(e.width(),100):!isNaN(t)||String(t).indexOf("px")>-1?(t=this.oW=parseInt(t),this.responsive&&(t=Math.min(e.parent().width(),t))):t=String(t).indexOf("%")>-1?e.parent().width()*(t.split("%")[0]/100):100,0!==i&&""!==i&&(t=Math.min(t,i)),o=""===o||0===o?""==this.image_url?Math.max(e.parent().height(),100):Math.max(e.height(),100):!isNaN(o)||String(o).indexOf("px")>-1?this.oH=parseInt(o):String(o).indexOf("%")>-1?e.parent().height()*(o.split("%")[0]/100):100,0!==s&&""!==s&&(o=Math.min(o,s)),this.oW&&t!==this.oW&&this.oH&&this.maintain_ratio&&(o=t/(this.oW/this.oH)),this.sW=t,this.sH=o},setLocation:function(t){var o=this,e=t,s,r,_,h;if(a&&e.css(a,"0 0"),e.css({display:"block","z-index":2}),o.use3D&&e.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1e3}),s=e.outerWidth()/2,r=e.outerHeight()/2,_=e.data("position").split(","),h=e.data("allow-scale"),h=void 0==h?o.allow_scale:i(h),e.hasClass("mark")){var c=e.find("img").css("vertical-align","bottom").width();$(e.children()[0]).css({position:"absolute",left:-e.width()/2,bottom:2*parseInt(e.css("padding-bottom"))});var l=e.find(".text");o.locations.push({ob:e,x:parseInt(_[0]),y:parseInt(_[1]),w2:s,h2:r,w2pad:s+(l[0]?parseInt(l.css("padding-left")):0),vis:!1,lab:!1,lpx:"0",lpy:"0",showAt:isNaN(e.data("show-at-zoom"))?o.show_at_zoom:parseInt(e.data("show-at-zoom"),10)/100,scale:h})}else if(e.hasClass("lable")){var d=e.data("bg-color"),p=e.data("bg-opacity"),m=$(e.eq(0).children()[0]).css({position:"absolute","z-index":2,left:-s,top:-r});if(o.locations.push({ob:e,x:parseInt(_[0]),y:parseInt(_[1]),w2:s,h2:r,w2pad:s,vis:!1,lab:!0,lpx:"0",lpy:"0",showAt:isNaN(e.data("show-at-zoom"))?o.show_at_zoom:parseInt(e.data("show-at-zoom"),10)/100,scale:h}),""!==d){d||(d="#000000",p=.7);var u=$('<div style="position: absolute; left: '+-s+"px; top: "+-r+"px; width: "+2*(s-parseInt(m.css("padding-left")))+"px; height:"+2*(r-parseInt(m.css("padding-top")))+"px; background-color: "+d+';"></div>').appendTo(e);p&&u.css("opacity",p)}}e.hide(),n&&e.css("opacity",0),o.allow_drag||e.bind(o.event_down,function(t){t.stopPropagation()})},getStyle:function(){var t=this.$image;return{prop_origin:[a,a!==!1&&void 0!==a?t.css(a):null],prop_transform:[n,n!==!1&&void 0!==n?t.css(n):null],position:["position",t.css("position")],"z-index":["z-index",t.css("z-index")],cursor:["cursor",t.css("cursor")],left:["left",t.css("left")],top:["top",t.css("top")],width:["width",t.css("width")],height:["height",t.css("height")]}},checkRatio:function(t,o,e,i,s){var n;return e==t&&i==o?n=1:t>e&&o>i?(n=t/e,s?n*i>o&&(n=o/i):(o>n*i&&(n=o/i),t/e!==o/i&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))):(n=t/e,s?(n*i>o&&(n=o/i),n<this.init_zoom&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move"))):(o>n*i&&(n=o/i),t/e!==o/i&&this.mouse_drag&&(this._moveCursor=!0,this.$image.css("cursor","move"),this.$hitArea.css("cursor","move")))),n},getDistance:function(t,o,e,i){return Math.sqrt(Math.abs((e-t)*(e-t)+(i-o)*(i-o)))},mouseDown:function(t){var e=t.data.self,i=t.originalEvent,s,n,a;e._onfocus=e._dragging=!1,e.cFlag._nd&&(e._onHitArea=!0,e.samePointRelease=!1,e.fixMoz&&e.correctTransValue(),t.type==e.pointerDown&&(a=i.MSPOINTER_TYPE_MOUSE&&i.pointerType===i.MSPOINTER_TYPE_MOUSE||"mouse"==i.pointerType,e.pointers.push({pageX:i.pageX,pageY:i.pageY,id:i.pointerId}),n=e.pointers.length,s=e.pointers),"mousedown"==t.type||a?(e.stX=i.pageX||t.pageX,e.stY=i.pageY||t.pageY,e.offX=e.stX-e.$holder.offset().left-e.$image.position().left,e.offY=e.stY-e.$holder.offset().top-e.$image.position().top,$(o).bind(e.event_move+e.id,{self:e},e.mouseDrag)):("touchstart"==t.type&&(n=i.targetTouches.length,s=i.touches),n>1?(e._pinching=!0,e._rA=e.rA,e.dStart=e.getDistance(s[0].pageX,s[0].pageY,s[1].pageX,s[1].pageY)):(e.offX=s[n-1].pageX-e.$holder.offset().left-e.$image.position().left,e.offY=s[n-1].pageY-e.$holder.offset().top-e.$image.position().top,e.setDraggedPos(s[n-1].pageX-e.$holder.offset().left-e.offX,s[n-1].pageY-e.$holder.offset().top-e.offY,e._sc),e._recent="drag",e._dragging=!0))),("mousedown"==t.type||t.type==e.pointerDown)&&t.preventDefault()},mouseDrag:function(t){var o=t.data.self,e=t.originalEvent,i,s;if("mousemove"==t.type)return o.setDraggedPos(t.pageX-o.$holder.offset().left-o.offX,t.pageY-o.$holder.offset().top-o.offY,o._sc),o._recent="drag",o._dragging=!0,o._playing||o.Animate(),!1;if((o._dragging||o._pinching)&&t.preventDefault(),o._onHitArea){if(t.type==o.pointerMove){for(var n=0;n<o.pointers.length;n++)e.pointerId==o.pointers[n].id&&(o.pointers[n].pageX=e.pageX,o.pointers[n].pageY=e.pageY);i=o.pointers,s=o.pointers.length}else i=e.touches,s=i.length;if(!(s>1))return o.setDraggedPos(i[0].pageX-o.$holder.offset().left-o.offX,i[0].pageY-o.$holder.offset().top-o.offY,o._sc),o._recent="drag",o._dragging=!0,o._playing||o.Animate(),!1;o._pinching||(o._pinching=!0,o._rA=o.rA,o.dStart=o.getDistance(i[0].pageX,i[0].pageY,i[1].pageX,i[1].pageY)),o._centx=(i[0].pageX+i[1].pageX)/2,o._centy=(i[0].pageY+i[1].pageY)/2,o.focusOffX=o._centx-o.$holder.offset().left-o.sW/2,o.focusOffY=o._centy-o.$holder.offset().top-o.sH/2,o.changeOffset(!0,!0),o._wheel=!0,o._dragging=!1,o.zoom_single?o.sRed=300:(o.dEnd=o.getDistance(i[0].pageX,i[0].pageY,i[1].pageX,i[1].pageY),o.rA=o._rA*(o.dEnd/o.dStart),o.rA=o.rA>o.zoom_max?o.zoom_max:o.rA,o.rA=o.rA<o.rF?o.rF:o.rA),o._sc<o.rA?(o.cFlag._zo=!1,o.cFlag._zi=!0):(o.cFlag._zi=!1,o.cFlag._zo=!0),o._playing||o.Animate()}},mouseUp:function(t){var e=t.data.self;return e.pointers=[],e._onButton?(e.$holder.find("#"+e.buttons[e.cButtId]._var+"norm").show(),e.$holder.find("#"+e.buttons[e.cButtId]._var+"over").hide(),6!==e.cButtId&&(e.cFlag[e.buttons[e.cButtId]._var]=!1),"touchend"==t.type&&e.buttons[e.cButtId].$ob.css("opacity")>.5&&e.buttons[e.cButtId].$ob.css("opacity",.7),e._onButton=!1,t.stopPropagation(),!1):void(e._onHitArea&&(e.hasTouch||$(o).unbind(e.event_move+e.id),(e.mouse_drag||e.touch_drag)&&("mouseup"==t.type?(e.stX==t.pageX&&e.stY==t.pageY&&(e.samePointRelease=!0),e._recent="drag",e._dragging=!1,e._playing||e.Animate()):(t.preventDefault(),e._dragging=!1,e._pinching?(e._pinching=!1,e._wheel=!1,e.cFlag._nd=!0,e.cFlag._zi=!1,e.cFlag._zo=!1):(e._recent="drag",e._playing||e.Animate())),e._onHitArea=!1)))},mouseWheel:function(t,o){var e=t.data.self;return e._onfocus=e._dragging=!1,e.mouse_wheel_cur&&(e.focusOffX=t.pageX-e.$holder.offset().left-e.sW/2,e.focusOffY=t.pageY-e.$holder.offset().top-e.sH/2,e.changeOffset(!0,!0)),e._dragging=!1,o>0?e.rA!=e.zoom_max&&(e.zoom_single?e._wheel||(e.sRed=300):(e.rA*=1>o?1+.3*o:1.3,e.rA=e.rA>e.zoom_max?e.zoom_max:e.rA),e._wheel=!0,e.cFlag._zi=!0,clearTimeout(e.ani_timer),e._playing=!0,e.Animate(),e.cFlag._zi=!1):e.rA!=e.rF&&(e.zoom_single?e._wheel||(e.sRed=300):(e.rA/=o>-1?1+.3*-o:1.3,e.rA=e.rA<e.rF?e.rF:e.rA),e._wheel=!0,e.cFlag._zo=!0,clearTimeout(e.ani_timer),e._playing=!0,e.Animate(),e.cFlag._zo=!1),!1},autoHide:function(t){var o=t.data.self;clearTimeout(o.auto_timer),o.auto_timer=setTimeout(function(){o.$controls.fadeOut(600)},o.bu_delay),o.$holder.bind("mouseenter.sz",function(t){clearTimeout(o.auto_timer),o.$controls.fadeIn(300)})},correctTransValue:function(){var t=this.$image.css("-moz-transform").toString().replace(")","").split(",");this.transOffX=parseInt(t[4]),this.transOffY=parseInt(t[5])},setDraggedPos:function(t,o,e){var i=this;""!==t&&(i.dX=t+i.transOffX,i.pan_limit?(i.dX=i.dX+e*i.iW<i.sW?i.sW-e*i.iW:i.dX,i.dX=i.dX>0?0:i.dX,e*i.iW<i.sW&&(i.dX=(i.sW-e*i.iW)/2)):(i.dX=i.dX+e*i.iW<i.sW/2?i.sW/2-e*i.iW:i.dX,i.dX=i.dX>i.sW/2?i.sW/2:i.dX)),""!==o&&(i.dY=o+i.transOffY,i.pan_limit?(i.dY=i.dY+e*i.iH<i.sH?i.sH-e*i.iH:i.dY,i.dY=i.dY>0?0:i.dY,e*i.iH<i.sH&&(i.dY=(i.sH-e*i.iH)/2)):(i.dY=i.dY+e*i.iH<i.sH/2?i.sH/2-e*i.iH:i.dY,i.dY=i.dY>i.sH/2?i.sH/2:i.dY))},Animate:function(){var t=this,o=.5;if(t.cFlag._nd=!0,t.ani_end=!1,t.cFlag._zi&&(t._wheel||t.zoom_single||(t.rA*=t.zoom_speed),t.rA>t.zoom_max&&(t.rA=t.zoom_max),t.cFlag._nd=!1,t.cFlag._rs=!1,t._recent="zoomIn",t._onfocus=t._dragging=!1),t.cFlag._zo&&(t._wheel||t.zoom_single||(t.rA/=t.zoom_speed),0!=t.zoom_min?t.rA<t.zoom_min&&(t.rA=t.zoom_min):t.rA<t.rF&&(t.rA=t.rF),t.cFlag._nd=!1,t.cFlag._rs=!1,t._recent="zoomOut",t._onfocus=t._dragging=!1),t.zoom_single&&!t.cFlag._rs&&("zoomIn"==t._recent?(t.sRed+=(10-t.sRed)/6,t.rA+=(t.zoom_max-t.rA)/(1/(t.pan_speed_o+1)*t.sRed+1)):"zoomOut"==t._recent&&(t.sRed+=(3-t.sRed)/3,t.rA+=(t.rF-t.rA)/((1/t.pan_speed_o+1)*t.sRed+1))),t.pan_speed=(Math.max(1,1+(t.sW+t.sH)/500)+t.pan_speed_o*t.pan_speed_o/4)/Math.max(1,t.rA/2),t.cFlag._ml&&(t.oX-=t.pan_speed,t.cFlag._nd=!1,t.cFlag._rs=!1,t._recent="left",t._onfocus=t._dragging=!1),t.cFlag._mr&&(t.oX+=t.pan_speed,t.cFlag._nd=!1,t.cFlag._rs=!1,t._recent="right",t._onfocus=t._dragging=!1),t.cFlag._mu&&(t.oY-=t.pan_speed,t.cFlag._nd=!1,t.cFlag._rs=!1,t._recent="up",t._onfocus=t._dragging=!1),t.cFlag._md&&(t.oY+=t.pan_speed,t.cFlag._nd=!1,t.cFlag._rs=!1,t._recent="down",t._onfocus=t._dragging=!1),t.cFlag._rs&&(t.oX+=(t.fX-t.oX)/8,t.oY+=(t.fY-t.oY)/8,t.cFlag._nd=!1,t._recent="reset",t._onfocus=t._dragging=!1),t.zoom_single&&"reset"!==t._recent?t._onfocus?t._sc+=(t.rA-t._sc)/t.reduction:t._sc=t.rA:t._sc+=(t.rA-t._sc)/(t.ani_smooth/(t._onfocus?t.reduction:1)),t._w=t._sc*t.iW,t._h=t._sc*t.iH,t._dragging&&(t.tX=t.dX,t.tY=t.dY,t.changeOffset(!0,!0)),"zoomIn"==t._recent?(t._w>t.rA*t.iW-o&&!t.zoom_single?(t.cFlag._nd&&(t.ani_end=!0),t._sc=t.rA):t._w>t.zoom_max*t.iW-o&&t.zoom_single&&(t.cFlag._nd&&(t.ani_end=!0),t._sc=t.rA=t.zoom_max),t.ani_end&&(t._w=t._sc*t.iW,t._h=t._sc*t.iH)):"zoomOut"==t._recent&&(t._w<t.rA*t.iW+o&&!t.zoom_single?(t.cFlag._nd&&(t.ani_end=!0),t._sc=t.rA):t._w<t.rF*t.iW+o&&t.zoom_single&&(t.cFlag._nd&&(t.ani_end=!0),t._sc=t.rA=t.rF),t.ani_end&&(t._w=t._sc*t.iW,t._h=t._sc*t.iH)),t.limitX=(t._w-t.sW)/(t._w/t.sW)/2,t.limitY=(t._h-t.sH)/(t._h/t.sH)/2,t._dragging||(t.pan_limit?(t.oX<-t.limitX-t.focusOffX&&(t.oX=-t.limitX-t.focusOffX),t.oX>t.limitX-t.focusOffX&&(t.oX=t.limitX-t.focusOffX),t._w<t.sW&&(t.tX=(t.sW-t._w)/2,t.changeOffset(!0,!1)),t.oY<-t.limitY-t.focusOffY&&(t.oY=-t.limitY-t.focusOffY),t.oY>t.limitY-t.focusOffY&&(t.oY=t.limitY-t.focusOffY),t._h<t.sH&&(t.tY=(t.sH-t._h)/2,t.changeOffset(!1,!0))):(t.oX<-t.limitX-t.focusOffX/t._w*t.sW-t.sW/2/(t._w/t.sW)&&(t.oX=-t.limitX-t.focusOffX/t._w*t.sW-t.sW/2/(t._w/t.sW)),t.oX>t.limitX-t.focusOffX/t._w*t.sW+t.sW/2/(t._w/t.sW)&&(t.oX=t.limitX-t.focusOffX/t._w*t.sW+t.sW/2/(t._w/t.sW)),t.oY<-t.limitY-t.focusOffY/t._h*t.sH-t.sH/(t._h/t.sH*2)&&(t.oY=-t.limitY-t.focusOffY/t._h*t.sH-t.sH/(t._h/t.sH*2)),t.oY>t.limitY-t.focusOffY/t._h*t.sH+t.sH/(t._h/t.sH*2)&&(t.oY=t.limitY-t.focusOffY/t._h*t.sH+t.sH/(t._h/t.sH*2)))),t._dragging||"drag"==t._recent||(t.tX=(t.sW-t._w)/2+t.focusOffX+t.oX*(t._w/t.sW),t.tY=(t.sH-t._h)/2+t.focusOffY+t.oY*(t._h/t.sH),1===t.ani_smooth&&(t.cFlag._nd=!0,t.ani_end=!0)),"zoomIn"==t._recent||"zoomOut"==t._recent||t.cFlag._rs?(t._x=t.tX,t._y=t.tY):(t._x+=(t.tX-t._x)/(t.ani_smooth/(t._onfocus?t.reduction:1)),t._y+=(t.tY-t._y)/(t.ani_smooth/(t._onfocus?t.reduction:1))),"left"==t._recent?(t._x<t.tX+o||1===t.ani_smooth)&&(t.cFlag._nd?t.ani_end=!0:"",t._recent="",t._x=t.tX):"right"==t._recent?(t._x>t.tX-o||1===t.ani_smooth)&&(t.cFlag._nd?t.ani_end=!0:"",t._recent="",t._x=t.tX):"up"==t._recent?(t._y<t.tY+o||1===t.ani_smooth)&&(t.cFlag._nd?t.ani_end=!0:"",t._recent="",t._y=t.tY):"down"==t._recent?(t._y>t.tY-o||1===t.ani_smooth)&&(t.cFlag._nd?t.ani_end=!0:"",t._recent="",t._y=t.tY):"drag"==t._recent&&(t._x+o>=t.tX&&t._x-o<=t.tX&&t._y+o>=t.tY&&t._y-o<=t.tY||1===t.ani_smooth)&&(t._onfocus&&(t._dragging=!1),t.cFlag._nd?t.ani_end=!0:"",t._recent="",t._x=t.tX,t._y=t.tY),t.cFlag._rs&&t._w+o>=t.rA*t.iW&&t._w-o<=t.rA*t.iW&&t.oX<=t.fX+o&&t.oX>=t.fX-o&&t.oY<=t.fY+o&&t.oY>=t.fY-o&&(t.ani_end=!0,t._recent="",t.cFlag._rs=!1,t.cFlag._nd=!0,t._x=t.tX,t._y=t.tY,t._sc=t.rA,t._w=t._sc*t.iW,t._h=t._sc*t.iH),t.rA==t.rF&&t.iW*t.rA<=t.sW&&t.iH*t.rA<=t.sH){if(t.buttons[1].$ob.css("opacity")>.5&&t.rA>=t.rF&&(""==t.init_zoom||t.rA<t.init_zoom)&&(""==t.zoom_min||t.rA<t.zoom_min)){t.pan_limit&&t._moveCursor&&!t._moveCursor&&(t.$image.css("cursor","default"),t.$hitArea.css("cursor","default"));for(var e=1;e<(t.pan_limit&&!t._moveCursor?t.buttons_total:2);e++)t.buttons[e].$ob.css({opacity:.4}),t._wheel=!1,t.$holder.find("#"+t.buttons[e]._var+"norm").show(),t.$holder.find("#"+t.buttons[e]._var+"over").hide()}}else if(t.buttons[1].$ob.css("opacity")<.5){t._moveCursor&&t.mouse_drag&&(t.$image.css("cursor","move"),t.$hitArea.css("cursor","move"));for(var e=1;e<t.buttons_total;e++)t.buttons[e].$ob.css("opacity",.7)}t.rA==t.zoom_max?t.buttons[0].$ob.css("opacity")>.5&&(t.buttons[0].$ob.css("opacity",.4),t._wheel=!1,t.$holder.find("#"+t.buttons[0]._var+"norm").show(),t.$holder.find("#"+t.buttons[0]._var+"over").hide()):t.buttons[0].$ob.css("opacity")<.5&&t.buttons[0].$ob.css("opacity",.7),n?t.$image.css(n,"translate("+t._x.toFixed(14)+"px,"+t._y.toFixed(14)+"px) scale("+t._sc+")"):t.$image.css({left:t._x,top:t._y,width:t._w,height:t._h}),t.$loc_cont&&t.updateLocations(t._x,t._y,t._sc,t.locations),!n&&t.map_coordinates.length>0&&t.updateMap(),t.ani_end&&!t._dragging&&"drag"!=t._recent?(t._playing=!1,t._recent="",t.cX=(-t._x+t.sW/2)/t.rA,t.cY=(-t._y+t.sH/2)/t.rA,t.onUPDATE&&t.onUPDATE(t.getZoomData(),!1),t.onZOOM_PAN&&t.onZOOM_PAN(t.getZoomData()),clearTimeout(t.ani_timer)):(t._playing=!0,t.onUPDATE&&t.onUPDATE(t.getZoomData(),!0),t.ani_timer=setTimeout(function(){t.Animate()},28))},updateLocations:function(t,o,e,i){""!==this.onLANDMARK&&(e>=this.show_at_zoom?this._landmark||(this._landmark=!0,this.onLANDMARK(!0)):this._landmark&&(this._landmark=!1,this.onLANDMARK(!1)));for(var s=0;s<i.length;s++){var a,r,_=i[s].x*e+t,h=i[s].y*e+o;e>=i[s].showAt?(i[s].scale&&n?(a=i[s].w2pad*this._sc,r=i[s].h2*this._sc):(a=i[s].w2pad,r=i[s].h2),_>-a&&_<this.sW+a&&(h>-r&&h<this.sH+r&&i[s].lab||h>0&&h<this.sH+2*r&&!i[s].lab)?i[s].vis||(i[s].vis=!0,n?i[s].ob.stop().css("display","block").animate({opacity:1},300):i[s].ob.show()):i[s].vis&&(i[s].vis=!1,n?i[s].ob.stop().animate({opacity:0},200,function(){$(this).hide()}):i[s].ob.hide())):i[s].vis&&(i[s].vis=!1,n?i[s].ob.stop().animate({opacity:0},200,function(){$(this).hide()}):i[s].ob.hide()),(_!==i[s].lpx||h!==i[s].lpy&&i[s].vis)&&(n?i[s].ob.css(n,"translate("+_.toFixed(14)+"px,"+h.toFixed(14)+"px)"+(i[s].scale?" scale("+this._sc+")":"")):i[s].ob.css({left:_,top:h})),i[s].lpx=_,i[s].lpy=h}},roundBG:function(t,o,e,i,s,n,a,r,_,h){var c=25;t.append($('<div class="bgi'+o+'" style="background-position:'+-(n-s)+"px "+(-(c-s)-h)+'px"></div>				<div class="bgh'+o+'"></div>				<div class="bgi'+o+'" style="background-position:'+-n+"px "+(-(c-s)-h)+"px; left:"+(e-s)+'px"></div>				<div class="bgi'+o+'" style="background-position:'+-(n-s)+"px "+(-c-h)+"px; top:"+(i-s)+'px"></div>				<div class="bgh'+o+'" style = "top:'+(i-s)+"px; left:"+s+'px"></div>				<div class="bgi'+o+'" style="background-position:'+-n+"px "+(-c-h)+"px; top:"+(i-s)+"px; left:"+(e-s)+'px"></div>				<div class="bgc'+o+'"></div>')),$(".bgi"+o).css({position:"absolute",width:s,height:s,"background-image":"url("+r+")","background-repeat":"no-repeat","-ms-filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",zoom:1}),$(".bgh"+o).css({position:"absolute",width:e-2*s,height:s,"background-color":a,left:s}),$(".bgc"+o).css({position:"absolute",width:e,height:i-2*s,"background-color":a,top:s,left:0})},changeOffset:function(t,o){t&&(this.oX=(this.tX-(this.sW-this._w)/2-this.focusOffX)/(this._w/this.sW)),o&&(this.oY=(this.tY-(this.sH-this._h)/2-this.focusOffY)/(this._h/this.sH))},updateMap:function(){var t=this,o=0;t.mapAreas.each(function(){for(var e=[],i=0;i<t.map_coordinates[o].length;i++)e[i]=t.map_coordinates[o][i]*t._sc;e=e.join(","),$(this).attr("coords",e),o++})},haltAnimation:function(){clearTimeout(this.ani_timer),this._playing=!1,this._recent=""},destroy:function(){var e=this;if(e.assetsLoaded){e.haltAnimation();for(prop in e.orig_style)e.orig_style[prop][0]!==!1&&void 0!==e.orig_style[prop][0]&&("width"===e.orig_style[prop][0]||"height"===e.orig_style[prop][0]?0!==parseInt(e.orig_style[prop][1])&&e.$image.css(e.orig_style[prop][0],e.orig_style[prop][1]):e.$image.css(e.orig_style[prop][0],e.orig_style[prop][1]));clearTimeout(e.auto_timer),$(o).unbind(".sz"+e.id),$(t).unbind(".sz"+e.id),e.$holder.unbind(".sz"),e.$controls=void 0}else e.$image.show();""==e.container?""==e.image_url?(e.$image.insertBefore(e.$holder),void 0!==e.$holder&&e.$holder.remove()):(e.$elem.empty(),e.$loc_cont[0]&&e.$elem.append(e.loc_clone)):(e.$image.insertBefore(e.$holder),e.$holder.empty(),e.$image.wrap(e.$holder),e.$loc_cont[0]&&e.$holder.append(e.loc_clone)),e.$elem.removeData("smoothZoom"),e.$holder=void 0,e.Buttons=void 0,e.op=void 0,e.$image=void 0
},focusTo:function(t){var o=this;o.assetsLoaded&&(void 0===t.zoom||""===t.zoom||0==t.zoom?t.zoom=o.rA:t.zoom/=100,o._onfocus=!0,t.zoom>o.rA&&o.rA!=o.zoom_max?(o.rA=t.zoom,o.rA=o.rA>o.zoom_max?o.zoom_max:o.rA):t.zoom<o.rA&&o.rA!=o.rF&&(o.rA=t.zoom,o.rA=o.rA<o.rF?o.rF:o.rA),o.transOffX=o.transOffY=0,o.setDraggedPos(void 0===t.x||""===t.x?"":-t.x*o.rA+o.sW/2,void 0===t.y||""===t.y?"":-t.y*o.rA+o.sH/2,o.rA),o.reduction=t.speed?t.speed/10:o.focusSpeed,o._recent="drag",o._dragging=!0,o._playing||o.Animate())},zoomIn:function(t){this.buttons[0].$ob.trigger(this.event_down,{id:0})},zoomOut:function(t){this.buttons[1].$ob.trigger(this.event_down,{id:1})},moveRight:function(t){this.buttons[2].$ob.trigger(this.event_down,{id:2})},moveLeft:function(t){this.buttons[3].$ob.trigger(this.event_down,{id:3})},moveUp:function(t){this.buttons[4].$ob.trigger(this.event_down,{id:4})},moveDown:function(t){this.buttons[5].$ob.trigger(this.event_down,{id:5})},Reset:function(t){this.buttons[6].$ob.trigger(this.event_down,{id:6})},getZoomData:function(t){return{normX:(-this._x/this.rA).toFixed(14),normY:(-this._y/this.rA).toFixed(14),normWidth:this.iW,normHeight:this.iH,scaledX:-this._x.toFixed(14),scaledY:-this._y.toFixed(14),scaledWidth:this._w,scaledHeight:this._h,centerX:(-this._x.toFixed(14)+this.sW/2)/this.rA,centerY:(-this._y.toFixed(14)+this.sH/2)/this.rA,ratio:this.rA}},addLandmark:function(t){if(this.$loc_cont){for(var o=t.length,e=0;o>e;e++){var i=$(t[e]);this.$loc_cont.append(i),this.setLocation(i)}o>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},attachLandmark:function(t){if(this.$loc_cont){for(var o=t.length,e=0;o>e;e++)this.setLocation(t[e]instanceof jQuery?t[e]:$("#"+t[e]));o>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},removeLandmark:function(t){if(this.$loc_cont){if(t)for(var o=t.length,e=0;o>e;e++)for(var i=0;i<this.locations.length;i++)(t[e]instanceof jQuery&&this.locations[i].ob[0]==t[e][0]||!(t[e]instanceof jQuery)&&this.locations[i].ob.attr("id")==t[e])&&(this.locations[i].ob.remove(),this.locations.splice(i,1),i--);else this.locations.length>0&&(this.locations[this.locations.length-1].ob.remove(),this.locations.pop());o>0&&this.updateLocations(this._x,this._y,this._sc,this.locations)}},refreshAllLandmarks:function(){var t=this,o=t.$loc_cont.children(".item");t.show_at_zoom=parseInt(t.$loc_cont.data("show-at-zoom"),10)/100,t.allow_scale=i(t.$loc_cont.data("allow-scale")),t.allow_drag=i(t.$loc_cont.data("allow-drag"));for(var e=0;e<t.locations.length;e++){var s=!1;o.each(function(){t.locations[e].ob[0]==$(this)[0]&&(s=!0)}),s||(t.locations.splice(e,1),e--)}o.each(function(){for(var o=!1,e=0;e<t.locations.length;e++)if(t.locations[e].ob[0]==$(this)[0]){o=!0;break}o||t.setLocation($(this))}),this.updateLocations(this._x,this._y,this._sc,this.locations)},resize:function(t){var o;if(t.data){t.preventDefault(),o=t.data.self;var e=o.$holder.parent().width(),i=o.$holder.parent().height();o.oW&&(e=Math.min(e,o.oW)),o.sW=e,o.oH?o.oW&&o.maintain_ratio&&(o.sH=e/(o.oW/o.oH)):o.sH=i}else o=this,t.width&&(o.sW=t.width),t.height&&(o.sH=t.height),t.max_WIDTH&&(o.w_max=t.max_WIDTH),t.max_HEIGHT&&(o.h_max=t.max_HEIGHT);0!==o.w_max&&""!==o.w_max&&(o.sW=Math.min(o.sW,o.w_max)),0!==o.h_max&&""!==o.h_max&&(o.sH=Math.min(o.sH,o.h_max)),o.$holder.css({width:o.sW,height:o.sH}),o.bord_size>0&&(o.border[0].height(o.sH),o.border[1].css({height:o.sH,left:o.sW-o.bord_size}),o.border[2].width(o.sW-2*o.bord_size),o.border[3].css({width:o.sW-2*o.bord_size,top:o.sH-o.bord_size})),"center"==o.bu_align[1]&&o.$controls.css("left",parseInt((o.sW-o.cBW)/2)),"center"==o.bu_align[0]&&o.$controls.css("top",parseInt((o.sH-o.cBH)/2)),o.rF=o.rR=o.checkRatio(o.sW,o.sH,o.iW,o.iH,o.zoom_fit),0==o.zoom_min&&o.rA<o.rF&&(o.rA=o.rF),o.focusTo({x:o.cX,y:o.cY,zoom:"",speed:10})}},$.fn.smoothZoom=function(t){for(var o=this,i=o.length,s=0;i>s;s++){var n=$(o[s]),a=n.data("smoothZoom");if(a){if("getZoomData"==t)return a[t].apply(a,Array.prototype.slice.call(arguments,1));a[t]&&a[t].apply(a,Array.prototype.slice.call(arguments,1))}else"object"!=typeof t&&t||n.data("smoothZoom",new e(n,t))}return"getZoomData"!==t?this:void 0};var n=Modernizr.prefixed("transform"),a=Modernizr.prefixed("transformOrigin"),r=Modernizr.prefixed("borderRadius"),_=Modernizr.csstransforms3d}(jQuery,window,document),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function o(o){var a=o||window.event,r=_.call(arguments,1),h=0,l=0,d=0,p=0,m=0,u=0;if(o=t.event.fix(a),o.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(l=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(l=-1*d,d=0),h=0===d?l:d,"deltaY"in a&&(d=-1*a.deltaY,h=d),"deltaX"in a&&(l=a.deltaX,0===d&&(h=-1*l)),0!==d||0!==l){if(1===a.deltaMode){var g=t.data(this,"mousewheel-line-height");h*=g,d*=g,l*=g}else if(2===a.deltaMode){var f=t.data(this,"mousewheel-page-height");h*=f,d*=f,l*=f}if(p=Math.max(Math.abs(d),Math.abs(l)),(!n||n>p)&&(n=p,i(a,p)&&(n/=40)),i(a,p)&&(h/=40,l/=40,d/=40),h=Math[h>=1?"floor":"ceil"](h/n),l=Math[l>=1?"floor":"ceil"](l/n),d=Math[d>=1?"floor":"ceil"](d/n),c.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();m=o.clientX-b.left,u=o.clientY-b.top}return o.deltaX=l,o.deltaY=d,o.deltaFactor=n,o.offsetX=m,o.offsetY=u,o.deltaMode=0,r.unshift(o,h,l,d),s&&clearTimeout(s),s=setTimeout(e,200),(t.event.dispatch||t.event.handle).apply(this,r)}}function e(){n=null}function i(t,o){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&o%120===0}var s,n,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],_=Array.prototype.slice;if(t.event.fixHooks)for(var h=a.length;h;)t.event.fixHooks[a[--h]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var e=r.length;e;)this.addEventListener(r[--e],o,!1);else this.onmousewheel=o;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=r.length;e;)this.removeEventListener(r[--e],o,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(o){var e=t(o)["offsetParent"in t.fn?"offsetParent":"parent"]();return e.length||(e=t("body")),parseInt(e.css("fontSize"),10)},getPageHeight:function(o){return t(o).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})});